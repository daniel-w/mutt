Fri Jul 31 08:17:50 1998  Thomas Roessler  <roessler@guug.de>

	* rfc1524.c: Changing an sprintf to an snprintf (which it was meant to
	be.)

	* protos.h: mutt_sanitize_filename takes char *, not const char *.

	* protos.h, lib.c, attach.c:
	Introducing mutt_sanitize_filename().  The code is similar
	to patch-0.91.1i.tlr.rfc1524_sanitize.1 and to Peter
	Holzer's patch against 0.91.

	* rfc1524.h, rfc1524.c, postpone.c, attach.c:
	Avoid possible buffer overflows in mutt_adv_mktemp().

	* sendlib.c: Interpret sysexits-style exit values from sendmail.

	* configure.in, configure, config.h.in, acconfig.h:
	Check for sysexits.h.

Thu Jul 30 09:30:38 1998  Thomas Roessler  <roessler@guug.de>

	* edit.c: When reading in files, be_snarf_file() wouldn't recognize
	'~' as the user's home directory.

Wed Jul 29 10:54:09 1998  Thomas Roessler  <roessler@guug.de>

	* README, Changes: Finalizing 0.93.2i.

	* configure.in, configure: Bumping to 0.93.2(i).

	* parse.c: Fixing a buffer overflow in parse.c which presented a
	serious security thread.  Noted by Paul Boehm
	<paul@boehm.org>.

Tue Jul 28 08:21:49 1998  Thomas Roessler  <roessler@guug.de>

	* Attic/patch.slang-1.2.2.keypad.1: Adding a patch for a SLang bug.

	* INSTALL: Adding a patch for a SLang bug.

	* mx.c: Doing 'mutt -f NoSuchFile' just flickers the screen and
	silently exits. Earlier (0.92.14 at least), it used to
	spit out the error 'NoSuchFile: no such file or directory
	(errno = 2)'.  (Noted and tracked down by Vikas Agnihotri
	<VikasA@att.com>)

	* color.c: The index cache should be updated even without color
	support.

Mon Jul 27 13:39:39 1998  Thomas Roessler  <roessler@guug.de>

	* Attic/BUGS: Adding a notice about some more nits.

	* main.c: Change the error reporting mail address from
	<mutt-dev@cs.hmc.edu> to <mutt-dev@mutt.org>.

	* protos.h, init.h, color.c:
	This patch fixes index "color" patterns when using a
	non-color capable curses library.  While working on color
	support, I've thrown together the mutt_parse_color() and
	mutt_parse_mono() functions as they are sharing most of
	their code.  Additionally, a new directive called "unmono"
	is introduced.  The implementation consists in adding a
	flag and very few lines of code (plus ifdefs) to
	mutt_parse_uncolor().

	* snprintf.c, rfc1524.h, rfc1524.c, date.c:
	Fixing some minor nits: missing #includes in date.c and
	snprintf.c, and a not-so-nice declaration of
	rfc1524_new_entry().  Noted by Digital cc and gcc.

Fri Jul 24 08:12:46 1998  Thomas Roessler  <roessler@guug.de>

	* copy.c, attach.c:
	Fiddling around with message/rfc822 attachments once again.

Thu Jul 23 20:57:50 1998  Thomas Roessler  <roessler@guug.de>

	* status.c, sendlib.c, send.c, rfc2047.c, pop.c, pager.c, mx.c, mh.c, mbox.c, lib.c, init.c, imap.c, edit.c, curs_lib.c, compose.c, commands.c, color.c, browser.c, attach.c, alias.c:
	Guard lots of global (char *) variable deferences against
	NULL pointers.

	* copy.c, attach.c:
	Yet another patch about saving message/rfc822 attachments.

	* main.c, send.c: Fixing potential NULL pointer deferences.

Wed Jul 22 22:47:57 1998  Thomas Roessler  <roessler@guug.de>

	* recvattach.c: Another fix from Liviu.

	* recvattach.c, from.c, attach.c:
	Another patch from liviu to fix the message/rfc822
	behaviour.

	* recvattach.c, mx.c, attach.c:
	This patch fixes the saving of message/rfc822 attachments
	to mail folders.  Additionally, it fixes an outstanding
	bug with From_ lines being written to MH folders.

	(From: Liviu Daia <daia@stoilow.imar.ro>)

	* menu.c, functions.h, browser.c, OPS:
	1. When I hit 'c' (change dir) in browser, it gives me the
	   directory, but without the final '/', so I have to add
	   '/' to add a subdirectory name. This patch fixes it.

	2. check-new now will recheck mailbox folders for new
	   mail.

	3. added a function toggle-mailboxes which toggles in
	   browser between mailboxes view and directory view.
	   (bound to TAB by default).

	(From: "Michael S. Tsirkin" <mtsirkin@iil.intel.com>)

	* send.c: Correct an error message in send.c.
	(From: Byrial Jensen <byrial@post3.tele.dk>)

	* sendlib.c, recvattach.c, protos.h, postpone.c,
	pager.c, mx.c, mutt.h, lib.c, keymap.c, handler.c,
	compose.c, commands.c, attach.h, attach.c:

	These changes fix some of the bugs which were
	recently reported to mutt-dev.  To be more specific,
	message-type attachments are saved to mail folders
	from the receive attachment menu, some of the
	sending code has been made more robust against
	disappearing attachments, and "tag" is rebound to
	"T" on the compose menu.

	(Some part of this patch comes from Vikas Agnihotri
	<VikasA@att.com>.)

	* send.c: Avoid a potential segmentation fault when
	trying to postpone, but Postponed equals NULL.

	* Attic/BUGS: This file is intended to contain known
	bugs which still have to be fixed.

	* doc/manual.txt:
	Committing the changes previously made to manual.sgml.

	* imap.c: Include Message-ID and Reply-To headers
	when fetching a message's headers from an IMAP
	server. (From: Andy Sloane <andude@incarnate.net>)

Tue Jul 21 07:54:03 1998  Thomas Roessler  <roessler@guug.de>

	* recvattach.c:
	The old behaviour of the %d (for description) specifier is
	recreated by this patch.
	(From: Byrial Jensen <byrial@post3.tele.dk>)

	* protos.h, lib.c, attach.c:
	You should never _ever_ do something like this:

	       [process A]  ---[piped write until EOF]---> [process B]
	       [process A]  <---[piped read until EOF]--- [process B]

	Basically, what happens is something like this: A
	feeds data to B; B processes the data, and feeds it
	to the pipe until the pipe buffer is full; at this
	point, A writes to its pipe until its buffer is full
	too, and if it still has more data to write, that's
	it, it never gets to the read part to flush B's
	buffer --- both processes are blocked on write.

	This patch fixes such a situation in the compose menu.

	(From: Liviu Daia <daia@stoilow.imar.ro>)

Mon Jul 20 21:01:05 1998  Thomas Roessler  <roessler@guug.de>

	* reap.pl: Perl lies in /usr/bin on my machines.

	* pop.c: It seems that if you don't enter any
	password at all when prompted for the POP password,
	Mutt will die with a segmentation fault also. (Bug
	reported by Steve Mayer <smayer@rtd.com> via the
	Debian bug tracking system, fix from Thomas
	Roessler.)

	* postpone.c: When you send a message which have
	been postponed before sending, then all its
	attachments (if there are more than one) will have a
	content-disposition header which includes a
	filename, even if there isn't a real filename but
	only random choosen temporary one. (From: Byrial
	Jensen <byrial@post3.tele.dk>)

Sat Jul 18 09:18:31 1998  Thomas Roessler  <roessler@guug.de>

	* recvattach.c: "Set mime_forward, and forward a
	message --- Mutt will segfault." The obvious fix for
	this is to check for aptr->content->hdr in
	mutt_attach_fmt() before invoking
	_mutt_make_string().  Anyway, I suspect that the
	real fix may involve something like parsing the
	rfc822 attachment in question.

	* sendlib.c: Postponing messages behaves funny when the $postponed
	folder is in Maildir format; I traced this down to the
	fact that postponed messages are saved in "cur" while
	mutt_num_postponed() is looking at "new".
	(From: Liviu Daia <daia@stoilow.imar.ro>)

Fri Jul 17 08:37:02 1998  Thomas Roessler  <roessler@guug.de>

	* compose.c: Removing the old snd_entry() code.

	* doc/manual.sgml, protos.h, pgp.c, mutt.h, init.h, hook.c:
	When sending encrypted messages, it may arrive that Mutt
	can't determine the PGP key of the recipient (presumably
	because her address has changed, but she hasn't updated
	her PGP key yet). In this situation it's convenient to be
	able to associate a keyID with an address automatically.
	The attached patch is an attempt to implement this idea
	using a "pgp-hook". (From: Liviu Daia <daia@stoilow.imar.ro>).

	* recvattach.c: Removing the old attach_entry() code.

	* recvattach.c, protos.h, mutt.h, init.h, globals.h, compose.c:
	This patch adds a string variable $attach_format which
	controls the look of the compose and attach menus.
	Unfortunately, I was not able to make things so that it
	would look exactly the same as the hardcoded versions, so
	the default format is a bit different, but I think it is
	quite usable.  (From Michael Elkins <me@cs.hmc.edu>).

	* functions.h, browser.c, OPS:
	This patch allows you to view files from the browser
	window, useful if you are searching for a file to attach
	to your message. It uses the standard mailcap stuff (and
	the lookup mime types) to use the correct "viewer" for the
	file.  (From Brandon Long <blong@fiction.net>)

	* doc/Attic/dotlock.man.in, doc/Makefile.in, configure.in, configure, Makefile.in:
	Dotlock-related changes: We call it mutt.dotlock to avoid
	conflicts with certain NFS versions' dotlocking utilities
	(pointed out by Liviu Daia).  Additionally, we need to
	compile it as an external utility on systems which don't
	have an fchdir(2) system call.

Thu Jul 16 16:39:53 1998  Thomas Roessler  <roessler@guug.de>

	* mx.c: Fixing a small typographic error.

	* mx.c: Mutt doesn't retry locking if it doesn't succeed at once.
	The code in mx_lock_file is supposed to retry but it
	doesn't work because of a mistake in operator precedence.
	(From: Petri Kaukasoina <kaukasoi@elektroni.ee.tut.fi>)

	* Attic/dotlock.c:
	The dotlock.c file tries to include <posix1_lim.h> if
	_POSIX_PATH_MAX isn't defined but it doesn't include
	<limits.h>, where this symbol should be defined.  (From
	Marc.Baudoin@solsoft.com)

	* send.c: When several messages are tagged and the user applies
	reply, group-reply, or list-reply to these messages, the
	reply's references and in-reply-to headers are constructed
	from the tagged message which comes last in the current
	index.  This patch constructs the references header from
	_all_ messages' message-id and references headers. (tlr)

	* reldate.h, configure.in, configure, Changes, ChangeLog:
	Preparing mutt 0.94.

	* imap.c: "My two remaining issues are the speed at which it
	downloads the headers, and support of PREAUTH. I'm
	enclosing a patch (to stock mutt-0.92.13i) which addresses
	these issues." (From Brian Marcotte
	<marcotte@panix7.panix.com>)

	* color.c: This patch fixes two problems reported on mutt-users.

	(1) the error message about "default colors not supported"
	when not using a color xterm should not be printed.  The
	existing code did not check the value of has_colors() in
	conjunction with use_default_colors()

	(2) mutt would crash when sending mail in batch mode
	because use_default_colors() could be used without doing
	an initscr()

	(From Michael Elkins.)

Wed Jul 15 17:15:46 1998  Thomas Roessler  <roessler@guug.de>

	* mx.h, mx.c, main.c, Attic/dotlock.h,
	Attic/dotlock.c, configure.in, configure,
	Makefile.in: Finalizing the external dotlock
	support: If group mail privileges are needed, the
	dotlock is compiled as a separate program.  If
	there is no need for privileges, it remains a
	module which is compiled into mutt. Also, there is
	no more need for the SLang buffer overflow
	work-around in main().  We drop it, but let mutt
	bail out instead if it's installed setgid
	something.

	* doc/Attic/dotlock.man.in, Attic/dotlock.c:
	Fix the race condition in dotlock.c.

	* doc/Attic/mutt.man.in:
	Putting the manual page under autoconf control.

	* doc/Attic/mutt.man.in:
	file mutt.man.in was initially added on branch mutt-0-94.

	* doc/mutt.man: Putting the manual page under autoconf control.

	* doc/Attic/dotlock.man.in:
	Adding external dotlocking.  For bugs, see the manual page
	and the comments in dotlock.c.

	* doc/Attic/dotlock.man.in:
	file dotlock.man.in was initially added on branch mutt-0-94.

	* doc/Makefile.in, protos.h, mx.c, mbox.c, main.c, globals.h, Attic/dotlock.h:
	Adding external dotlocking.  For bugs, see the manual page
	and the comments in dotlock.c.

	* Attic/dotlock.h:
	file dotlock.h was initially added on branch mutt-0-94.

	* Attic/dotlock.c:
	Adding external dotlocking.  For bugs, see the manual page
	and the comments in dotlock.c.

	* Attic/dotlock.c:
	file dotlock.c was initially added on branch mutt-0-94.

	* configure.in, configure, Makefile.in:
	Adding external dotlocking.  For bugs, see the manual page
	and the comments in dotlock.c.

	* doc/mutt.man: More roff fixes.

	* doc/mutt.man: More groff fixes.

Tue Jul 14 16:01:07 1998  Thomas Roessler  <roessler@guug.de>

	* reldate.h, configure.in, configure, Changes, ChangeLog:
	Preparing mutt 0.93.1i.

	* rfc2047.c, mime.h, handler.c: More unsigned fixes.

	* pattern.c, parse.c:
	Changing (int) casts in is* arguments to (unsigned char).

	* rfc2047.c: Removing a superfluous (unsigned char) cast in an IsPrint
	argument.

Mon Jul 13 10:50:39 1998  Thomas Roessler  <roessler@guug.de>

	* doc/mutt.sgml, doc/mutt.man, doc/Makefile.in:
	Since manual page generation seems to be broken in the
	SGML-tools package, we remove the SGML version of mutt.man
	and make the troff source the master copy.  Suggested by
	Roland Rosenfeld <roland@luv.rhein.de> who also provided
	the corrected mutt.man file.

Sun Jul 12 13:15:31 1998  Thomas Roessler  <roessler@guug.de>

	* protos.h: Replace calloc by safe_calloc in new_pattern.

Sat Jul 11 05:10:29 1998  Thomas Roessler  <roessler@guug.de>

	* doc/manual.txt, doc/manual.sgml: Key bindings documentation.

Fri Jul 10 17:58:26 1998  Thomas Roessler  <roessler@guug.de>

	* NEWS: s/fwd_decode/forward_decode/ (Noted by Lars Hecking)

	* pop.c: tmp[] wasn't initialized when asking for the POP password.

	* buffy.c: On SunOS 4.1, one must include unistd.h in order to
	declare SEEK_END.  (Fabrice Noilhan)

	* mutt.h: include <posix1_lim.h> if limits.h doesn't defile
	_POSIX_PATH_MAX.

	* Changes, ChangeLog: *** empty log message ***

	* doc/PGP-Notes.txt: Adding a notice about core dumps.

	* reldate.h, README, INSTALL: Preparing 0.93i.

	* handler.c: Fix text/enriched decoding: if there's a tag mismatch in
	the last paragraph in the attachment, the whole paragraph
	wouldn't be displayed.

Thu Jul  9 19:51:36 1998  Thomas Roessler  <roessler@guug.de>

	* configure.in, configure, Attic/config.sub:
	Use CC -Ae -D_HPUX_SOURCE on HP/UX.

	* Attic/config.sub:
	file config.sub was initially added on branch mutt-0-93.

	* Attic/config.guess: Use CC -Ae -D_HPUX_SOURCE on HP/UX.

	* Attic/config.guess:
	file config.guess was initially added on branch mutt-0-93.

	* INSTALL: Use CC -Ae -D_HPUX_SOURCE on HP/UX.

Wed Jul  8 21:59:43 1998  Thomas Roessler  <roessler@guug.de>

	* snprintf.c, pattern.c, parse.c, mx.c, mh.c, lib.c, keymap.c, init.c, from.c, edit.c, curs_main.c:
	Changing (int) casts in is* arguments to (unsigned char)
	casts to avoid mis-casting of signed chars.  (From Michael
	Elkins.)

Tue Jul  7 09:22:40 1998  Thomas Roessler  <roessler@guug.de>

	* rfc822.c: Change one int to size_t in rfc822.c.

	* rfc822.c: Fix the parsing of route addresses a la RFC 822.  Patch
	from Michael Elkins.

	* snprintf.c, sendlib.c, pattern.c, parse.c, mx.c, mh.c, lib.c, keymap.c, init.c, from.c, edit.c, curs_main.c:
	Cast the arguments of the is* functions to int.  Patch
	from Michael Elkins.

Thu Jul  2 21:15:18 1998  Thomas Roessler  <roessler@guug.de>

	* hdrline.c:
	Using the correct version of O'Shaughnessy Evans' %O patch.

	* configure.in, configure, Changes, ChangeLog: Preparig 0.92.14i

	* doc/manual.txt, doc/manual.sgml: s/&setmn;/&bsol;/

	* hdrline.c: Adding the %O expansion.

	* doc/manual.sgml: Applying the various manual_nits patches.

Wed Jul  1 17:01:50 1998  Thomas Roessler  <roessler@guug.de>

	* curs_main.c: Fixing a reverse-threading problem.

	* imap.c: Fixing an imap-related segmentation fault.

Tue Jun 30 06:38:02 1998  Thomas Roessler  <roessler@guug.de>

	* reldate.h, Changes, ChangeLog:
	These are the last tiny bits of preparing 0.92.13i.

	* configure.in, configure, TODO, README, NEWS:
	Updating some of the documentation for 0.93.

	* doc/Attic/NEWS: *** empty log message ***

	* doc/Attic/NEWS: file NEWS was initially added on branch mutt-0-93.

	* doc/manual.txt: Incorporate the recent changes to manual.sgml.

	* main.c: Work around a buffer overflow in SLang.  (This is the same
	bug which is fixed by 0.91.2i.)

Fri Jun 26 10:31:28 1998  Thomas Roessler  <roessler@guug.de>

	* doc/manual.sgml, send.c, init.h, globals.h, Muttrc.in:
	Removing $empty_to.

Thu Jun 25 22:31:46 1998  Thomas Roessler  <roessler@guug.de>

	* hdrline.c: Moved a break statement where it belongs.

	* mx.c: Fix an imap-related typo.

	* handler.c: Don't generate non-terminated last lines when quoting
	8bit-"encoded" text-plain body parts.

	* Makefile.in: Don't use GNU make specific features.

Sun Jun 21 07:13:03 1998  Thomas Roessler  <roessler@guug.de>

	* doc/mutt.man, doc/Makefile.in, reldate.h, configure.in, configure, Changes, ChangeLog:
	Bumping the release to 0.92.12i.

Sat Jun 20 06:12:38 1998  Thomas Roessler  <roessler@guug.de>

	* doc/manual.txt: *** empty log message ***

	* handler.c: Fixing the quoted-printable decoder.

	* handler.c, copy.c: Make mutt handle messages containing null bytes.

	* doc/manual.sgml: documenting alias-path

Fri Jun 19 12:52:16 1998  Thomas Roessler  <roessler@guug.de>

	* sendlib.c, send.c, protos.h, postpone.c, pattern.c, menu.c, main.c, headers.c, functions.h, curs_main.c, compose.c, OPS:
	Removing the Attach-Menu feature for the next release
	version.

Thu Jun 18 20:37:59 1998  Thomas Roessler  <roessler@guug.de>

	* protos.h, lib.c, alias.c:
	Bradon long's alias_path patch, for the sake of Elm
	compatibility.

Tue Jun 16 20:59:20 1998  Thomas Roessler  <roessler@guug.de>

	* mx.c: Avoid pointless error messages from mx_get_magic() when
	called from an mx_open_mailbox_append() on a non-existing
	mailbox.

	* doc/manual.txt, doc/Makefile.in, configure.in, configure, Makefile.in:
	Have "make install" install manual.txt as well.

	* doc/Attic/makefile, doc/Makefile.in:
	Putting Makefile under autoconf control.

	* main.c: Switch the error reporting address from mutt-users to
	mutt-dev.

	* reldate.h, configure.in, configure, Changes, ChangeLog:
	Bump the version to 0.92.11i.

	* imap.h: Check in a proper version of imap.h.

	* color.c: Fix the "unknown color" bug reported by Vikas.

	* mx.c: Remove a spurious #include "imap.h" from mx.c.

	* doc/style-guide: Add a note about the global Muttrc to style-guide.

	* configure.in, Muttrc.in, configure, Attic/Muttrc, Makefile.in:
	The global Muttrc contains a list of default settings
	which can be used as a starting-point for the user's own
	configuration.

	* pgppubring.c, pgp.h, gnupgparse.c:
	Removing some duplicate code from gnupgparse.c and
	pgppubring.c.

	* pgpinvoke.c, gnupgparse.c:
	Include part of Werner Koch's latest GPG patches.

	* Changes: *** empty log message ***

	* configure.in, configure, Changes, ChangeLog: Preparing 0.92.10i.

	* doc/PGP-Notes.txt: Including Roland's new procmail recipe.

	* protos.h, pattern.c, menu.c, curs_main.c, compose.c, addrbook.c:
	Including Vikas' search code for the "attach message" menu.

Mon Jun 15 15:19:49 1998  Thomas Roessler  <roessler@guug.de>

	* mx.c, main.c, mailbox.h, imap.c, commands.c: Brandon's IMAP patch.

